/* ---- Theme ---- */
:root{
  --bg:#0b1023;
  --bg2:#060912;
  --moon:#f5f1d7;
  --accent:#ff6aa9;      /* hearts */
  --accent2:#7dd3fc;     /* blue sparkles */
  --present:#e11d48;     /* gift base */
  --present-dark:#9f1239;
  --ribbon:#ffd166;
  --glow:0 0 30px rgba(255,255,255,.25);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:#fff;
  background: radial-gradient(1100px 600px at 70% -10%, #132055, transparent 60%),
             radial-gradient(800px 500px at 10% -20%, #1a2a6d, transparent 55%),
             radial-gradient(1000px 600px at 50% 120%, #0a0f23, #070b17 60%, var(--bg2));
  overflow:hidden;
}

/* ---- Sky Layers ---- */
.sky{ position:fixed; inset:0; z-index:0; pointer-events:none; }
.layer{ position:absolute; inset:0; }

.stars, .stars:before, .stars:after{
  content:""; display:block; position:absolute; inset:0;
  background-repeat:repeat; background-size: 2000px 2000px;
  animation: twinkle 18s linear infinite;
  filter: drop-shadow(0 0 2px #fff8);
}
.stars{
  background-image:
    radial-gradient(1px 1px at 20% 20%, #fff9, #fff0 60%),
    radial-gradient(1px 1px at 70% 40%, #fff9, #fff0 60%),
    radial-gradient(1px 1px at 40% 80%, #fff9, #fff0 60%);
}
.stars:before{
  background-image:
    radial-gradient(1px 1px at 10% 60%, #fff9, #fff0 60%),
    radial-gradient(1px 1px at 60% 10%, #fff9, #fff0 60%),
    radial-gradient(1px 1px at 90% 70%, #fff9, #fff0 60%);
  animation-duration:24s; opacity:.7;
}
.stars:after{
  background-image:
    radial-gradient(2px 2px at 30% 30%, #fff, #fff0 60%),
    radial-gradient(2px 2px at 80% 65%, #fff, #fff0 60%);
  animation-duration:32s; opacity:.55;
}
.stars-2{ animation-duration:28s }
.stars-3{ animation-duration:38s }

@keyframes twinkle { to{ background-position:-2000px -2000px } }

/* Aurora (cinematic gradient waves) */
.aurora{
  --g1: #7dd3fc33;
  --g2: #a78bfa33;
  --g3: #34d39933;
  background:
    radial-gradient(1200px 500px at 20% 10%, var(--g1), transparent 60%),
    radial-gradient(900px 400px at 70% 20%, var(--g2), transparent 60%),
    radial-gradient(1100px 600px at 50% -10%, var(--g3), transparent 70%);
  mix-blend-mode: screen;
  animation: auroraShift 18s ease-in-out infinite alternate;
  filter: blur(18px);
}
@keyframes auroraShift{
  0%{ transform:translateY(0) }
  100%{ transform:translateY(6vh) }
}

/* Moon moving across */
.moon{
  width:14vmin; height:14vmin; border-radius:50%;
  background: radial-gradient(circle at 35% 35%, #fff, var(--moon) 40%, #e7e1c2 60%, #0000 61%),
              radial-gradient(circle at 65% 65%, #e9e3c8, #cfc9a8 60%, #0000 61%);
  box-shadow: var(--glow);
  top:8vh; left:-15vmin;
  animation: moonPath 55s linear infinite;
}
@keyframes moonPath{
  0%   { transform: translateX(0) translateY(0); }
  50%  { transform: translateX(120vw) translateY(-6vh); }
  100% { transform: translateX(240vw) translateY(0); }
}

/* Shooting stars */
.shooting i{
  position:absolute; width:14vmin; height:2px;
  background:linear-gradient(90deg,#fff, #fff0);
  top:10vh; left:20vw; transform:rotate(-22deg);
  box-shadow:0 0 6px #fff;
  animation: shoot 4.8s linear infinite;
}
.shooting i:nth-child(2){ top:30vh; left:70vw; animation-delay:1.2s; transform:rotate(-27deg) }
.shooting i:nth-child(3){ top:60vh; left:10vw; animation-delay:2.3s; transform:rotate(-15deg) }
@keyframes shoot{
  0%{ opacity:0; transform:translate3d(0,0,0) rotate(var(--rot,-22deg)); }
  10%{ opacity:1 }
  100%{ opacity:0; transform:translate3d(-50vw,30vh,0) rotate(var(--rot,-22deg)); }
}

/* Mountains parallax silhouette */
.mountains{
  position:absolute; bottom:-2vh; left:0; right:0; height:40vh;
  background:
    radial-gradient(80vmax 40vmax at 20% 100%, #0a0f23 40%, transparent 41%) bottom left / 60% 100% no-repeat,
    radial-gradient(90vmax 50vmax at 80% 100%, #0a0f23 40%, transparent 41%) bottom right / 60% 100% no-repeat;
  filter: drop-shadow(0 20px 40px #000a);
  opacity:.9;
}

/* ---- 3D Particles (CSS only) ---- */
.space3d{ position:fixed; inset:0; perspective:800px; pointer-events:none; z-index:1; }
.field{ position:absolute; inset:-10vh -10vw; transform-style:preserve-3d; }
.field span{
  position:absolute; width:6px; height:6px; border-radius:50%;
  background:#fff; box-shadow:0 0 12px #fff7;
  opacity:.85; transform-style:preserve-3d;
  animation: drift 10s linear infinite;
}
/* Randomized positions/timings using nth-child */
@keyframes drift{
  0%   { transform: translate3d(var(--x), var(--y), var(--z)) scale(var(--s,1)); opacity:.2 }
  50%  { transform: translate3d(calc(var(--x) + 12vw), calc(var(--y) - 8vh), calc(var(--z) + 200px)) scale(calc(var(--s,1) * 1.2)); opacity:1 }
  100% { transform: translate3d(calc(var(--x) + 24vw), calc(var(--y) - 16vh), calc(var(--z) + 400px)) scale(var(--s,1)); opacity:.25 }
}
/* Generate 64 rule-sets */
.field span:nth-child(1){--x:5vw; --y:20vh; --z:-600px; --s:.8; animation-duration:12s}
.field span:nth-child(2){--x:15vw; --y:60vh; --z:-700px; --s:1; animation-duration:13s}
.field span:nth-child(3){--x:70vw; --y:30vh; --z:-800px; --s:.9; animation-duration:11s}
.field span:nth-child(4){--x:40vw; --y:70vh; --z:-900px; --s:1.1; animation-duration:12s}
.field span:nth-child(5){--x:85vw; --y:20vh; --z:-500px; --s:.7; animation-duration:10s}
.field span:nth-child(6){--x:55vw; --y:10vh; --z:-1000px; --s:1.2; animation-duration:14s}
.field span:nth-child(7){--x:25vw; --y:50vh; --z:-650px; --s:.9; animation-duration:12s}
.field span:nth-child(8){--x:10vw; --y:75vh; --z:-550px; --s:1.1; animation-duration:11s}
.field span:nth-child(9){--x:60vw; --y:80vh; --z:-950px; --s:.85; animation-duration:15s}
.field span:nth-child(10){--x:30vw; --y:25vh; --z:-750px; --s:1; animation-duration:13s}
.field span:nth-child(11){--x:90vw; --y:55vh; --z:-650px; --s:.95; animation-duration:12s}
.field span:nth-child(12){--x:50vw; --y:35vh; --z:-850px; --s:1.05; animation-duration:13s}
.field span:nth-child(13){--x:5vw; --y:85vh; --z:-700px; --s:.8; animation-duration:12s}
.field span:nth-child(14){--x:75vw; --y:10vh; --z:-900px; --s:1.2; animation-duration:14s}
.field span:nth-child(15){--x:42vw; --y:62vh; --z:-600px; --s:.9; animation-duration:11s}
.field span:nth-child(16){--x:18vw; --y:33vh; --z:-1000px; --s:1.1; animation-duration:12s}
.field span:nth-child(17){--x:12vw; --y:15vh; --z:-550px; --s:.9; animation-duration:10s}
.field span:nth-child(18){--x:22vw; --y:78vh; --z:-850px; --s:1; animation-duration:13s}
.field span:nth-child(19){--x:68vw; --y:58vh; --z:-750px; --s:1.1; animation-duration:12s}
.field span:nth-child(20){--x:82vw; --y:38vh; --z:-650px; --s:.85; animation-duration:11s}
.field span:nth-child(21){--x:36vw; --y:18vh; --z:-950px; --s:1.15; animation-duration:14s}
.field span:nth-child(22){--x:58vw; --y:12vh; --z:-700px; --s:.95; animation-duration:12s}
.field span:nth-child(23){--x:8vw; --y:44vh; --z:-900px; --s:1.05; animation-duration:13s}
.field span:nth-child(24){--x:48vw; --y:84vh; --z:-800px; --s:.9; animation-duration:12s}
.field span:nth-child(25){--x:28vw; --y:68vh; --z:-600px; --s:1; animation-duration:11s}
.field span:nth-child(26){--x:95vw; --y:22vh; --z:-750px; --s:1.1; animation-duration:12s}
.field span:nth-child(27){--x:64vw; --y:44vh; --z:-650px; --s:.85; animation-duration:10s}
.field span:nth-child(28){--x:14vw; --y:58vh; --z:-950px; --s:1.2; animation-duration:14s}
.field span:nth-child(29){--x:52vw; --y:26vh; --z:-850px; --s:.9; animation-duration:12s}
.field span:nth-child(30){--x:72vw; --y:74vh; --z:-700px; --s:1.05; animation-duration:13s}
.field span:nth-child(31){--x:2vw; --y:32vh; --z:-900px; --s:1.1; animation-duration:12s}
.field span:nth-child(32){--x:20vw; --y:8vh; --z:-650px; --s:.9; animation-duration:10s}
.field span:nth-child(33){--x:34vw; --y:48vh; --z:-1000px; --s:1.2; animation-duration:14s}
.field span:nth-child(34){--x:44vw; --y:12vh; --z:-750px; --s:1; animation-duration:11s}
.field span:nth-child(35){--x:62vw; --y:22vh; --z:-850px; --s:1.05; animation-duration:13s}
.field span:nth-child(36){--x:84vw; --y:82vh; --z:-600px; --s:.95; animation-duration:12s}
.field span:nth-child(37){--x:38vw; --y:86vh; --z:-900px; --s:1.1; animation-duration:14s}
.field span:nth-child(38){--x:16vw; --y:66vh; --z:-700px; --s:.85; animation-duration:10s}
.field span:nth-child(39){--x:76vw; --y:52vh; --z:-950px; --s:1.15; animation-duration:15s}
.field span:nth-child(40){--x:6vw; --y:72vh; --z:-800px; --s:.9; animation-duration:12s}
.field span:nth-child(41){--x:92vw; --y:12vh; --z:-700px; --s:1.1; animation-duration:12s}
.field span:nth-child(42){--x:26vw; --y:24vh; --z:-900px; --s:1; animation-duration:13s}
.field span:nth-child(43){--x:58vw; --y:64vh; --z:-650px; --s:.9; animation-duration:11s}
.field span:nth-child(44){--x:46vw; --y:38vh; --z:-950px; --s:1.2; animation-duration:14s}
.field span:nth-child(45){--x:66vw; --y:8vh; --z:-850px; --s:1.05; animation-duration:13s}
.field span:nth-child(46){--x:86vw; --y:44vh; --z:-600px; --s:.95; animation-duration:12s}
.field span:nth-child(47){--x:12vw; --y:92vh; --z:-850px; --s:1; animation-duration:12s}
.field span:nth-child(48){--x:22vw; --y:40vh; --z:-700px; --s:1.1; animation-duration:12s}
.field span:nth-child(49){--x:32vw; --y:30vh; --z:-900px; --s:.9; animation-duration:11s}
.field span:nth-child(50){--x:72vw; --y:22vh; --z:-750px; --s:1; animation-duration:12s}
.field span:nth-child(51){--x:82vw; --y:66vh; --z:-650px; --s:1.15; animation-duration:14s}
.field span:nth-child(52){--x:42vw; --y:72vh; --z:-950px; --s:1.05; animation-duration:13s}
.field span:nth-child(53){--x:52vw; --y:10vh; --z:-850px; --s:.9; animation-duration:12s}
.field span:nth-child(54){--x:8vw; --y:56vh; --z:-600px; --s:1; animation-duration:11s}
.field span:nth-child(55){--x:18vw; --y:28vh; --z:-900px; --s:1.1; animation-duration:14s}
.field span:nth-child(56){--x:28vw; --y:82vh; --z:-700px; --s:.95; animation-duration:12s}
.field span:nth-child(57){--x:62vw; --y:90vh; --z:-800px; --s:1.1; animation-duration:13s}
.field span:nth-child(58){--x:74vw; --y:36vh; --z:-950px; --s:1.2; animation-duration:15s}
.field span:nth-child(59){--x:94vw; --y:72vh; --z:-600px; --s:.9; animation-duration:10s}
.field span:nth-child(60){--x:4vw; --y:6vh; --z:-750px; --s:1; animation-duration:12s}
.field span:nth-child(61){--x:36vw; --y:10vh; --z:-900px; --s:1.15; animation-duration:14s}
.field span:nth-child(62){--x:56vw; --y:46vh; --z:-650px; --s:.85; animation-duration:11s}
.field span:nth-child(63){--x:68vw; --y:16vh; --z:-950px; --s:1.1; animation-duration:13s}
.field span:nth-child(64){--x:24vw; --y:64vh; --z:-850px; --s:1.05; animation-duration:12s}

/* ---- Floating hearts ---- */
.hearts{ position:fixed; inset:0; pointer-events:none; z-index:2; overflow:hidden; }
.hearts span{
  position:absolute; bottom:-10vh; left:var(--x,50%); font-size:clamp(16px, 3vmin, 28px);
  color:var(--accent); filter:drop-shadow(0 0 6px #ff7aaacc);
  animation: rise var(--t,12s) linear infinite;
}
.hearts span:nth-child(1){ --x:20%; --t:14s; opacity:.8 }
.hearts span:nth-child(2){ --x:80%; --t:15s; opacity:.7 }
.hearts span:nth-child(3){ --x:35%; --t:13s; opacity:.85 }
.hearts span:nth-child(4){ --x:65%; --t:16s; opacity:.9 }
@keyframes rise{ to{ transform: translateY(-120vh) translateX(-6vw) } }

/* ---- Main layout ---- */
.wrap{ position:relative; height:100%; display:grid; place-items:center; padding:24px; z-index:3; }
.title{
  position:absolute; top:18px; left:50%; transform:translateX(-50%);
  text-align:center; letter-spacing:.12em; text-transform:uppercase; opacity:.95;
  font-weight:600; font-size:clamp(12px, 2.7vmin, 20px);
}
.hint{ font-size:12px; opacity:.8; margin-top:8px }

/* ---- Gift ---- */
.gift{
  position:relative; width:min(78vmin, 520px); max-width:92vw; aspect-ratio: 1.2/1;
  display:grid; place-items:center; z-index:2;
}
#open{ position:absolute; opacity:0 }
.click-area{ position:absolute; inset:0; cursor:pointer; border-radius:24px }

.box{
  position:relative; width:70%; height:55%;
  background:linear-gradient(180deg, var(--present) 0%, var(--present-dark) 100%);
  border-radius:16px; box-shadow:0 12px 30px #0006, inset 0 -8px 16px #0003; transform:translateY(100%);
}
.lid{
  position:absolute; top: 65%; left:50%; transform:translateX(-50%) rotate(0deg); transform-origin: 100% 100%;
  width:78%; height:26%;
  background:linear-gradient(180deg, var(--present-dark) 0%, var(--present) 100%);
  border-radius:18px; box-shadow:0 10px 20px #0006; transition: transform .9s cubic-bezier(.2,.7,.05,1.2);
}
.ribbon-h, .ribbon-v{ position:absolute; background:linear-gradient(180deg, #fff2, #0002), var(--ribbon) }
.ribbon-h{ inset:auto 0 0 0; height:18%; border-radius:0 0 16px 16px }
.ribbon-v{ width:14%; height:100%; left:50%; transform:translateX(-50%); border-radius:16px }
.lid .ribbon-h{ height:40%; bottom:auto; top:0; border-radius:18px 18px 0 0 }
.lid .ribbon-knot{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-35%);
  width:46px; height:30px; background:var(--ribbon); border-radius:12px; box-shadow: inset 0 -6px 10px #0003;
}

/* Open -> reveal */
#open:checked ~ .lid{ transform: translateX(-50%) rotate(-28deg) }
#open:checked ~ .message{ opacity:1; transform:translate(-50%, -58%) scale(1); filter: drop-shadow(0 6px 24px #0009) }
#open:checked ~ .confetti{ opacity:1; }
#open:checked ~ .confetti span{ animation: fall var(--d) linear forwards }

/* Message card */
.message{
  position:absolute; left:50%; top:50%; transform:translate(-50%, -30%) scale(.92);
  width:90%; max-width:560px; padding:28px 24px 34px; text-align:center;
  background:linear-gradient(180deg, #1b243f, #0f1427); border:1px solid #2b3563; border-radius:20px;
  box-shadow:0 20px 50px #0008, inset 0 1px 0 #ffffff18; transition:.8s ease; opacity:0; z-index:-1;
}
.love{
  font-family:'Great Vibes', cursive;
  font-size: clamp(36px, 8.2vmin, 86px); line-height:1.05;
  font-weight:400; letter-spacing:.02em; color:#fff; text-shadow:0 2px 0 #0008, 0 0 22px #ff8cc5aa;
}
.to{ font-size: clamp(12px, 2.6vmin, 18px); opacity:.85; margin-bottom:8px }

/* Sparkles */
.sparkles i{ position:absolute; width:6px; height:6px; border-radius:50%; background:#fff; box-shadow:0 0 10px #fff; animation: pop 2.2s ease-in-out infinite }
.sparkles i:nth-child(1){ left:10%; top:18% }
.sparkles i:nth-child(2){ right:12%; top:22%; animation-delay:.5s }
.sparkles i:nth-child(3){ left:20%; bottom:18%; animation-delay:1.1s }
.sparkles i:nth-child(4){ right:16%; bottom:14%; animation-delay:1.6s }
@keyframes pop{ 0%,100%{ transform:scale(.7); opacity:.6 } 50%{ transform:scale(1.6); opacity:1 } }

/* Confetti */
.confetti{ position:absolute; inset:0; pointer-events:none; overflow:hidden; opacity:0 }
.confetti span{
  --d: calc(8s + (var(--i,1) * 0.18s));
  position:absolute; top:-10vh; left: var(--l, 50%);
  width:8px; height:16px; border-radius:2px;
  background: hsl(calc(var(--i,1)*22), 85%, 62%);
  transform: rotate(15deg);
}
@keyframes fall{
  0%{ transform: translateY(-10vh) rotate(0deg); opacity:0 }
  10%{ opacity:1 }
  100%{ transform: translateY(120vh) rotate(720deg); opacity:1 }
}
/* auto-generate positions for 60 pieces */
.confetti span{ --i:1 }
.confetti span:nth-child(1){ --l:3% } .confetti span:nth-child(2){ --l:6% }
.confetti span:nth-child(3){ --l:9% } .confetti span:nth-child(4){ --l:12% }
.confetti span:nth-child(5){ --l:15% } .confetti span:nth-child(6){ --l:18% }
.confetti span:nth-child(7){ --l:21% } .confetti span:nth-child(8){ --l:24% }
.confetti span:nth-child(9){ --l:27% } .confetti span:nth-child(10){ --l:30% }
.confetti span:nth-child(11){ --l:33% } .confetti span:nth-child(12){ --l:36% }
.confetti span:nth-child(13){ --l:39% } .confetti span:nth-child(14){ --l:42% }
.confetti span:nth-child(15){ --l:45% } .confetti span:nth-child(16){ --l:48% }
.confetti span:nth-child(17){ --l:51% } .confetti span:nth-child(18){ --l:54% }
.confetti span:nth-child(19){ --l:57% } .confetti span:nth-child(20){ --l:60% }
.confetti span:nth-child(21){ --l:63% } .confetti span:nth-child(22){ --l:66% }
.confetti span:nth-child(23){ --l:69% } .confetti span:nth-child(24){ --l:72% }
.confetti span:nth-child(25){ --l:75% } .confetti span:nth-child(26){ --l:78% }
.confetti span:nth-child(27){ --l:81% } .confetti span:nth-child(28){ --l:84% }
.confetti span:nth-child(29){ --l:87% } .confetti span:nth-child(30){ --l:90% }
.confetti span:nth-child(31){ --l:93% } .confetti span:nth-child(32){ --l:5% }
.confetti span:nth-child(33){ --l:11% } .confetti span:nth-child(34){ --l:17% }
.confetti span:nth-child(35){ --l:23% } .confetti span:nth-child(36){ --l:29% }
.confetti span:nth-child(37){ --l:35% } .confetti span:nth-child(38){ --l:41% }
.confetti span:nth-child(39){ --l:47% } .confetti span:nth-child(40){ --l:53% }
.confetti span:nth-child(41){ --l:59% } .confetti span:nth-child(42){ --l:65% }
.confetti span:nth-child(43){ --l:71% } .confetti span:nth-child(44){ --l:77% }
.confetti span:nth-child(45){ --l:83% } .confetti span:nth-child(46){ --l:89% }
.confetti span:nth-child(47){ --l:95% } .confetti span:nth-child(48){ --l:8% }
.confetti span:nth-child(49){ --l:14% } .confetti span:nth-child(50){ --l:20% }
.confetti span:nth-child(51){ --l:26% } .confetti span:nth-child(52){ --l:32% }
.confetti span:nth-child(53){ --l:38% } .confetti span:nth-child(54){ --l:44% }
.confetti span:nth-child(55){ --l:50% } .confetti span:nth-child(56){ --l:56% }
.confetti span:nth-child(57){ --l:62% } .confetti span:nth-child(58){ --l:68% }
.confetti span:nth-child(59){ --l:74% } .confetti span:nth-child(60){ --l:88% }

/* Footer */
.footer{
  position:absolute; bottom:12px; left:50%; transform:translateX(-50%);
  font-size:12px; opacity:.6; letter-spacing:.08em; text-transform:uppercase;
}

/* Small screens */
@media (max-width:520px){
  .box{ width:78%; height:54% }
  .lid{ width:86%; height:26% }
}
